<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VINHMODLAG | H·ªÜ TH·ªêNG ACC & KEY CHUY√äN NGHI·ªÜP</title>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --main: #00ff88; --dark: #0f172a; --card: #1e293b; --text: #f8fafc; --accent: #38bdf8; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Lexend', sans-serif; }
        body { background: var(--dark); color: var(--text); overflow-x: hidden; }

        /* AUTH SCREEN */
        #authScreen { position: fixed; inset: 0; background: radial-gradient(circle at center, #1e293b, #0f172a); z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .auth-box { background: var(--card); padding: 40px; border-radius: 30px; width: 380px; text-align: center; border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5); }
        .auth-box h1 { font-weight: 900; color: var(--main); font-size: 30px; margin-bottom: 10px; }

        /* HEADER */
        header { position: sticky; top: 0; height: 80px; background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(10px); display: flex; align-items: center; padding: 0 30px; z-index: 1000; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .logo { font-weight: 900; font-size: 24px; color: var(--main); flex: 1; }
        .wallet-box { background: rgba(0, 255, 136, 0.1); padding: 10px 20px; border-radius: 15px; border: 1px solid var(--main); color: var(--main); font-weight: bold; }

        /* INTRO BANNER */
        .intro-banner { background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); padding: 60px 20px; text-align: center; border-bottom: 2px solid var(--main); }
        .intro-banner h2 { font-size: 35px; font-weight: 900; margin-bottom: 15px; background: linear-gradient(to right, #00ff88, #38bdf8); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .intro-banner p { max-width: 600px; margin: 0 auto; color: #94a3b8; line-height: 1.6; }
        .badge-container { display: flex; justify-content: center; gap: 10px; margin-top: 25px; }
        .badge { background: rgba(255,255,255,0.05); padding: 8px 15px; border-radius: 10px; font-size: 12px; border: 1px solid rgba(255,255,255,0.1); }

        /* MAIN SHOP */
        .container { max-width: 1200px; margin: 40px auto; padding: 0 20px; }
        .shop-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; }
        .product-card { background: var(--card); border-radius: 25px; padding: 25px; border: 1px solid rgba(255,255,255,0.05); transition: 0.3s; position: relative; }
        .product-card:hover { transform: translateY(-10px); border-color: var(--main); }
        .stock-info { background: rgba(0,0,0,0.2); border-radius: 15px; padding: 12px; font-size: 11px; margin-bottom: 20px; color: #94a3b8; line-height: 1.8; }
        
        input, select, button, textarea { width: 100%; padding: 14px; margin: 10px 0; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1); background: #0f172a; color: white; outline: none; }
        .btn-main { background: var(--main); color: #000; font-weight: 900; border: none; cursor: pointer; text-transform: uppercase; letter-spacing: 1px; }
        .btn-main:hover { opacity: 0.9; box-shadow: 0 0 20px rgba(0, 255, 136, 0.4); }

        /* SIDE MENU */
        #sideMenu { position: fixed; top: 0; left: -450px; width: 400px; height: 100%; background: var(--card); z-index: 2000; padding: 30px; transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: 20px 0 50px rgba(0,0,0,0.5); }
        #robotArea { background: #000; border-radius: 20px; padding: 20px; margin-top: 20px; border: 1px solid #333; }
        #robotLogs { height: 150px; overflow-y: auto; font-family: monospace; font-size: 11px; color: #00ff88; margin-bottom: 10px; text-align: left; }

        /* MODALS */
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 5000; align-items: center; justify-content: center; backdrop-filter: blur(8px); }
        .modal-content { background: var(--card); padding: 35px; border-radius: 30px; width: 480px; text-align: center; border: 1px solid var(--main); }
        .result-box { background: #0f172a; padding: 20px; border-radius: 15px; color: var(--main); font-family: monospace; margin: 20px 0; white-space: pre-wrap; text-align: left; max-height: 200px; overflow-y: auto; }

        #overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 1500; }
        .hist-card { background: rgba(255,255,255,0.03); padding: 15px; border-radius: 15px; margin-bottom: 10px; text-align: left; border-left: 4px solid var(--main); }
    </style>
</head>
<body>

    <div id="authScreen">
        <div class="auth-box">
            <h1>VINHMODLAG</h1>
            <p style="color:#94a3b8; font-size: 13px; margin-bottom: 25px;">H·ªá th·ªëng Acc & Key T·ª± ƒê·ªông</p>
            <div id="loginForm">
                <input type="text" id="uLog" placeholder="T√™n ƒëƒÉng nh·∫≠p...">
                <input type="password" id="pLog" placeholder="M·∫≠t kh·∫©u...">
                <button class="btn-main" onclick="handleLogin()">V√†o H·ªá Th·ªëng</button>
                <p onclick="toggleAuth('reg')" style="font-size:12px; margin-top:15px; cursor:pointer; color:var(--main)">Ch∆∞a c√≥ t√†i kho·∫£n? ƒêƒÉng k√Ω</p>
            </div>
            <div id="regForm" style="display:none">
                <input type="text" id="uReg" placeholder="T·∫°o t√†i kho·∫£n m·ªõi...">
                <input type="password" id="pReg" placeholder="T·∫°o m·∫≠t kh·∫©u...">
                <button class="btn-main" style="background:var(--accent)" onclick="handleRegister()">ƒêƒÉng K√Ω Ngay</button>
                <p onclick="toggleAuth('log')" style="font-size:12px; margin-top:15px; cursor:pointer;">Quay l·∫°i ƒëƒÉng nh·∫≠p</p>
            </div>
        </div>
    </div>

    <div id="app" style="display:none">
        <header>
            <div onclick="openMenu()" style="font-size:28px; cursor:pointer; margin-right:20px;">‚ò∞</div>
            <div class="logo">VINHMODLAG</div>
            <div class="wallet-box">üí∞ <span id="userBal">0</span>ƒë</div>
        </header>

        <section class="intro-banner">
            <h2>H·ªÜ TH·ªêNG VINHMODLAG V75</h2>
            <p>Ch√†o m·ª´ng s·∫øp ƒë√£ quay tr·ªü l·∫°i. N∆°i cung c·∫•p gi·∫£i ph√°p Acc Clone Level 5 v√† Key Premium Itachi & Hopper v·ªõi gi√° s·ªâ t·ªët nh·∫•t th·ªã tr∆∞·ªùng Vi·ªát Nam.</p>
            <div class="badge-container">
                <div class="badge">üíé Uy T√≠n S·ªë 1</div>
                <div class="badge">üöÄ Giao H√†ng 1s</div>
                <div class="badge">üõ°Ô∏è B·∫£o H√†nh 24/7</div>
            </div>
        </section>

        <div id="sideMenu">
            <h2 style="color:var(--main)">S·∫øp: <span id="uNameDisp"></span></h2>
            <button class="btn-main" style="background:#334155; font-size:11px; margin-top:15px;" onclick="openModal('modalHist')">üìã L·ªäCH S·ª¨ MUA H√ÄNG</button>
            <hr style="margin:25px 0; opacity:0.1">
            
            <p style="font-size:11px; font-weight:bold; color:var(--accent)">N·∫†P TI·ªÄN H·ªÜ TH·ªêNG</p>
            <select id="payType" onchange="switchPay(this.value)">
                <option value="bank">Chuy·ªÉn kho·∫£n (QR)</option>
                <option value="the">Th·∫ª C√†o (Duy·ªát tay)</option>
            </select>
            <div id="bankArea">
                <input type="number" id="payAmt" placeholder="Nh·∫≠p s·ªë ti·ªÅn...">
                <button class="btn-main" style="background:#0066ff; color:white;" onclick="createQR()">T·∫°o M√£ QR</button>
                <div id="qrRes" style="display:none; margin-top:15px;"><img id="qrImg" style="width:100%; border-radius:15px;"></div>
            </div>
            <div id="cardArea" style="display:none">
                <input id="cardCode" placeholder="Nh·∫≠p m√£ th·∫ª/s·ªë seri...">
                <button class="btn-main" onclick="sendCard()">G·ª≠i Admin Duy·ªát</button>
            </div>

            <div id="adminPanel" style="display:none">
                <div id="robotArea">
                    <b style="color:var(--main); font-size:12px;">üñ•Ô∏è ROBOT ADMIN (VinhMod)</b>
                    <div id="robotLogs">H·ªá th·ªëng s·∫µn s√†ng...</div>
                    <input id="botCmd" placeholder="Nh·∫≠p l·ªánh (.help)">
                    <button onclick="execBot()" style="background:#00ff88; color:black; font-size:10px; padding:5px;">TH·ª∞C THI</button>
                    <button onclick="openModal('modalStock')" style="background:#475569; margin-top:5px; font-size:10px;">üì¶ N·∫†P KHO</button>
                </div>
            </div>
            
            <button onclick="logout()" style="border:1px solid #ef4444; color:#ef4444; background:none; margin-top:30px;">ƒêƒÇNG XU·∫§T</button>
        </div>

        <div class="container">
            <div class="shop-grid" id="shopGrid"></div>
        </div>
    </div>

    <div id="modalSuccess" class="modal"><div class="modal-content">
        <h2 style="color:var(--main)">GIAO D·ªäCH XONG! ‚úÖ</h2>
        <div class="result-box" id="resKeys"></div>
        <button class="btn-main" onclick="copyKeys()">SAO CH√âP T·∫§T C·∫¢</button>
        <button onclick="closeModal('modalSuccess')" style="background:none; border:none; color:#94a3b8; margin-top:15px; cursor:pointer;">ƒê√ìNG C·ª¨A S·ªî</button>
    </div></div>

    <div id="modalStock" class="modal"><div class="modal-content">
        <h3>üì¶ TH√äM H√ÄNG V√ÄO KHO</h3>
        <select id="stkProd">
            <option value="clone5">Acc Clone Lv5</option>
            <option value="itachi">Itachi Ping V3</option>
            <option value="hopper">Hopper Plus</option>
        </select>
        <select id="stkPlan">
            <option>M·∫∑c ƒë·ªãnh</option><option>1 Ng√†y</option><option>7 Ng√†y</option><option>30 Ng√†y</option><option>Vƒ©nh Vi·ªÖn</option>
        </select>
        <textarea id="stkRaw" rows="6" placeholder="M·ªói d√≤ng m·ªôt Key ho·∫∑c T√†i kho·∫£n..."></textarea>
        <button class="btn-main" onclick="addStock()">X√ÅC NH·∫¨N N·∫†P</button>
        <button onclick="closeModal('modalStock')">H·ª¶Y B·ªé</button>
    </div></div>

    <div id="modalHist" class="modal"><div class="modal-content">
        <h3>üìä L·ªäCH S·ª¨ MUA H√ÄNG</h3>
        <div id="histContent" style="max-height: 350px; overflow-y: auto; margin: 20px 0;"></div>
        <button onclick="closeModal('modalHist')">ƒê√ìNG</button>
    </div></div>

    <div id="overlay" onclick="closeMenu()"></div>

    <script>
        // DB KH·ªûI T·∫†O V·ªöI GI√Å CHU·∫®N C·ª¶A S·∫æP
        const KEY_DB = 'VINHMOD_PRO_DATABASE_V75';
        const KEY_SS = 'VINHMOD_SESSION_V75';

        let data = JSON.parse(localStorage.getItem(KEY_DB)) || {
            users: { "vinhmoddz": { p: "vinhmoddz", b: 10000000, admin: true, buys: [] } },
            prods: [
                { id: 0, slug: "clone5", name: "Acc Clone Lv5", plans: { "M·∫∑c ƒë·ªãnh": 5000 }, stock: { "M·∫∑c ƒë·ªãnh": [] } },
                { id: 1, slug: "itachi", name: "Itachi Ping V3", plans: { "1 Ng√†y": 10000, "7 Ng√†y": 50000, "30 Ng√†y": 150000, "Vƒ©nh Vi·ªÖn": 400000 }, stock: { "1 Ng√†y": [], "7 Ng√†y": [], "30 Ng√†y": [], "Vƒ©nh Vi·ªÖn": [] } },
                { id: 2, slug: "hopper", name: "Hopper Plus", plans: { "1 Ng√†y": 15000, "7 Ng√†y": 70000, "30 Ng√†y": 400000, "Vƒ©nh Vi·ªÖn": 420000 }, stock: { "1 Ng√†y": [], "7 Ng√†y": [], "30 Ng√†y": [], "Vƒ©nh Vi·ªÖn": [] } }
            ]
        };

        let user = localStorage.getItem(KEY_SS) || null;
        function save() { localStorage.setItem(KEY_DB, JSON.stringify(data)); if(user) renderShop(); }
        
        // AUTO-SAVE MECHANISM
        window.onbeforeunload = save;

        function renderShop() {
            document.getElementById('userBal').innerText = data.users[user].b.toLocaleString();
            let grid = document.getElementById('shopGrid'); grid.innerHTML = "";
            data.prods.forEach(p => {
                let sTxt = Object.keys(p.stock).map(k => `<b>${k}:</b> ${p.stock[k].length}`).join(' | ');
                grid.innerHTML += `
                <div class="product-card">
                    <div class="stock-info">${sTxt}</div>
                    <h2 style="margin-bottom:15px; color:var(--main)">${p.name}</h2>
                    <select id="sel-${p.id}">${Object.keys(p.plans).map(k=>`<option value="${k}">${k} - ${p.plans[k].toLocaleString()}ƒë</option>`).join('')}</select>
                    <input type="number" id="qty-${p.id}" value="1" min="1" placeholder="S·ªë l∆∞·ª£ng mua...">
                    <button class="btn-main" onclick="buy(${p.id})">Mua Ngay</button>
                </div>`;
            });
        }

        function buy(id) {
            let p = data.prods[id], plan = document.getElementById(`sel-${id}`).value, qty = parseInt(document.getElementById(`qty-${id}`).value) || 0;
            let total = p.plans[plan] * qty;
            
            if(qty <= 0) return alert("S·ªë l∆∞·ª£ng kh√¥ng h·ª£p l·ªá!");
            if(data.users[user].b < total) return alert("S·∫øp ∆°i, t√†i kho·∫£n kh√¥ng ƒë·ªß ti·ªÅn!");
            if(p.stock[plan].length < qty) return alert("Kho kh√¥ng ƒë·ªß h√†ng s·∫øp ∆°i!");

            let delivered = [];
            for(let i=0; i<qty; i++) delivered.push(p.stock[plan].shift());
            
            data.users[user].b -= total;
            data.users[user].buys.unshift({ name: p.name, plan, qty, keys: delivered, time: new Date().toLocaleString() });
            save(); // L∆∞u ngay l·∫≠p t·ª©c
            
            document.getElementById('resKeys').innerText = delivered.join("\n");
            openModal('modalSuccess');
        }

        // ROBOT ADMIN SYSTEM
        function execBot() {
            let cmd = document.getElementById('botCmd').value.trim(), p = cmd.split(" "), logs = document.getElementById('robotLogs');
            if(p[0] === ".duyet" && p[3] === "duyet") {
                let target = p[1], amt = parseInt(p[2]);
                if(data.users[target]) { data.users[target].b += amt; logs.innerHTML += `\n‚úÖ ƒê√£ n·∫°p ${amt}ƒë cho ${target}`; save(); }
            } else if(p[0] === ".banggiaudich") {
                let txt = "\n--- TR·∫†NG TH√ÅI KHO ---";
                data.prods.forEach(item => Object.keys(item.stock).forEach(pl => { if(item.stock[pl].length > 0) txt += `\n${item.name}-${pl}: ${item.stock[pl].length}`; }));
                logs.innerHTML += txt || "\nKho hi·ªán ƒëang tr·ªëng!";
            } else { logs.innerHTML += "\nL·ªánh: .duyet [t√™n] [ti·ªÅn] duyet, .banggiaudich"; }
            logs.scrollTop = logs.scrollHeight; document.getElementById('botCmd').value = "";
        }

        // CORE FUNCTIONS
        function handleLogin() {
            let u = document.getElementById('uLog').value, p = document.getElementById('pLog').value;
            if(data.users[u] && data.users[u].p === p) { user = u; localStorage.setItem(KEY_SS, u); init(); } else alert("Sai th√¥ng tin s·∫øp ∆°i!");
        }
        function handleRegister() {
            let u = document.getElementById('uReg').value, p = document.getElementById('pReg').value;
            if(u && !data.users[u]) { data.users[u] = {p, b:0, admin:false, buys:[]}; save(); toggleAuth('log'); alert("ƒêƒÉng k√Ω xong!"); }
        }
        function init() {
            document.getElementById('authScreen').style.display='none';
            document.getElementById('app').style.display='block';
            document.getElementById('uNameDisp').innerText = user;
            document.getElementById('adminPanel').style.display = data.users[user].admin ? 'block' : 'none';
            renderShop();
        }
        function addStock() {
            let pr = data.prods.find(x => x.slug === document.getElementById('stkProd').value);
            let raw = document.getElementById('stkRaw').value.trim();
            if(raw) { pr.stock[document.getElementById('stkPlan').value].push(...raw.split('\n')); save(); closeModal('modalStock'); alert("ƒê√£ n·∫°p h√†ng!"); }
        }
        function toggleAuth(m) { document.getElementById('loginForm').style.display = m==='log'?'block':'none'; document.getElementById('regForm').style.display = m==='reg'?'block':'none'; }
        function openMenu() { document.getElementById('sideMenu').style.left = '0'; document.getElementById('overlay').style.display = 'block'; }
        function closeMenu() { document.getElementById('sideMenu').style.left = '-450px'; document.getElementById('overlay').style.display = 'none'; }
        function openModal(id) { 
            document.getElementById(id).style.display = 'flex'; 
            if(id === 'modalHist') {
                let h = document.getElementById('histContent'); h.innerHTML = "";
                data.users[user].buys.forEach(b => h.innerHTML += `<div class="hist-card"><b>${b.name} (x${b.qty})</b><br><span style="font-size:10px; color:#94a3b8">${b.time}</span><br><code style="color:var(--main)">${b.keys.join(", ")}</code></div>`);
            }
        }
        function closeModal(id) { document.getElementById(id).style.display = 'none'; }
        function copyKeys() { navigator.clipboard.writeText(document.getElementById('resKeys').innerText); alert("ƒê√£ copy!"); }
        function createQR() { let a = document.getElementById('payAmt').value; document.getElementById('qrImg').src = `https://img.vietqr.io/image/MB-0364684151-compact2.jpg?amount=${a}&addInfo=NAP ${user}`; document.getElementById('qrRes').style.display='block'; }
        function switchPay(v) { document.getElementById('bankArea').style.display = v==='bank'?'block':'none'; document.getElementById('cardArea').style.display = v==='the'?'block':'none'; }
        function logout() { localStorage.removeItem(KEY_SS); location.reload(); }
        if(user) init();
    </script>
</body>
</html>
